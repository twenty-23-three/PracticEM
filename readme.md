# Задание СА

## Задание 1: Анализ требований

### Пункты 2, 9

- **Пункт 2.** Пользователь может изменить количество каждого товара в корзине не менее, чем до 1-го. Для удаления товара из корзины используется отдельная кнопка.
- **Пункт 9.** Если пользователь уменьшает количество товара до 0, товар удаляется из корзины.

Пункт 2 подразумевает, что нельзя изменить количество товара ниже 1 единицы. В пункте 9 описан сценарий, где количество товара уменьшают до 0.

### Пункты 7, 13

- **Пунту 7.** Цена на продукт фиксируется на момент добавления в корзину и не меняется.
- **Пункт 13.** Если цена на товар изменилась в каталоге, система должна автоматически обновить ее в корзине у всех пользователей.

Цена должна фиксироваться в момент добавления в корзину и не меняться. В пункте 13 цена автоматически обновляется в корзине, если цена изменилась в каталоге.

### Пункты 1, 3, 4

- **Пункт 1.** Пользователь может добавить в корзину от 1 до 10 единиц одного товара.
- **Пункт 3.** В корзине может находиться не более 5 различных товаров.
- **Пункт 4.** Суммарное количество всех товаров в корзине не может превышать 20 штук.

Сложная совместимость лимитов в корзине. Если в корзине 5 различных товаров, и мы можем добавить их до 10 единиц, то мы превысим общий лимит в 20 штук. Лучше указать, какой лимит сработает первым или как их комбинировать.

### Пункты 10, 11

- **Пункт 10.** В корзине может быть реклама других продуктов.
- **Пункт 11.** Реклама товаров в корзине должна быть каждый будний день по утрам и вечерам.

Нет точных данных о рекламе и времени показа.

### Пункт 12. Пропущена нумерация.

## Обновленное ТЗ:

### 1. Управление товарами и ограничениями.

1.1. **Количество позиций (Разных товаров):** В корзине может находиться не более 5 различных товаров.
1.2. **Общее количество товаров (Штук):** Суммарное количество всех товаров в корзине не может превышать 20 штук.
1.3. **Лимит на один товар (Штук на одну позицию):** Пользователь может добавить в корзину от 1 до 10 единиц одного товара.
1.4. **Добавление товара:** При добавлении товара в корзину проверяется соблюдение всех лимитов. Если лимит превышается, система блокирует действие и показывает понятное сообщение об ошибке (Пункт 2).
1.5. **Изменение количества товаров:**
    - Пользователь может увеличить количество одного товара в пределах лимита (до 10 на одну позицию, до 20 на общее количество товаров).
    - Пользователь может уменьшить количество товара. Если количество товара уменьшается до 0, товар автоматически удаляется из корзины. Для удобства есть отдельная кнопка “Удалить товар”.

### 2. Ошибки в корзине.

- **Превышен лимит количество товара.** Если пользователь пытается добавить более 10 единиц одного товара.
- **Превышен лимит разнообразных товаров.** Если пользователь пытается добавить более 5 позиций различных товаров.
- **Превышен лимит общей суммы товаров.** Если пользователь пытается добавить товар, и общая сумма товаров более 20.

### 3. Ценообразование.

3.1. **Фиксация цены.** Цена на товар фиксируется в момент добавления товара в корзину.
3.2. **Неизменность цены.** Изменение цены товара в каталоге не влияет на цену товара, уже добавленного в корзину.
3.3. **Перерасчёт.** Если пользователь удалит товар из корзины, а затем добавит его заново, цена фиксируется по текущей цене из каталога.

### 4. Отображение данных.

4.1. На странице корзины отображаются список товаров. Снизу общее количество товаров и общая стоимость корзины.
4.1. Для каждого товара отображается:
    - Название и изображение товара
    - Количество товара (с возможностью редактирования)
    - Общая стоимость товара (Фиксированная цена * количество).

### 5. Реклама в корзине.

5.1. **Размещение.** Баннер с рекламой размещается в правой колонке от корзины. (Место, размер и т.п. согласуется с дизайнерами и т.д.)
5.2. **Время показа рекламы.**
    - Реклама показывается только в будние дни (Пн-Пт)
    - Реклама показывается *временные отрезки* по местному времени.

## Вопросы

### По ценообразованию. Какой вариант нужно выбрать.

1. Фиксация цены в момент добавления в корзину.
2. Автоматическое изменение цены товара в корзине, после изменения цены в каталоге.

### По удалению товара. Какой способ оставить или использовать комбинирование.

1. Оставить кнопку удалить и ограничить уменьшение до 1.
2. Убрать кнопку удалить, товар автоматически удаляется, если значение 0.
3. Оба варианта, без ограничения. Товар удаляется, если значение 0 и для удобства кнопка Удалить.

### По рекламе.

1. Какие товары показывать, по каким фильтрам и т.п.
2. Уточнить временные рамки.

### По лимитам.

Уточнить приоритет, или возможность редактирования лимитов.

Можно ещё спросить про 12 пункт. Возможно, что-то потерялось или удалилось из ТЗ, может повлиять на другие пункты.

## Задание 2: Проектирование API

### 1. Запрос

`GET /api/v1/partners/stores`

**Headers:**

`Authorization: <user_token>`
`Content-Type: application/json`

В запрос можно передать параметры, лимиты и т.п.
В хедерс передаем токен авторизации, и определение ответа, что ждём назад.

### 2. Пример ответа.

```json
{
  "data": {
    "stores": [
      {
        "id": int, // айди магазина
        "name": string, // название магазина
        "logo_url": string, // url на логотип
        "external_link": string, // переход на внешний ресурс магазина
        "delivery_info": {
          "type": string, // тип доставки, экспресс, обычная
          "nearest_slot": string // примерное время доставки
        }
      }
    ]
  }
}
```

... Следующие магазины.

## Задание 3: Архитектура

(Содержание для этого раздела не было предоставлено в исходном документе.)
